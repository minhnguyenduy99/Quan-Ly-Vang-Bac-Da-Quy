CREATE TABLE TINHTRANG
(
	MATINHTRANG INTEGER PRIMARY KEY,
	TENTINHTRANG TEXT
);

CREATE TABLE DONVITINH
(
	MADVT INTEGER PRIMARY KEY,
	TENDVT TEXT
);

CREATE TABLE KHUVUC
(
	MAKHUVUC INTEGER PRIMARY KEY,
	TENKHUVUC TEXT
);

CREATE TABLE LOAIDICHVU
(
	MALOAIDV INTEGER PRIMARY KEY,
	TENLOAIDV TEXT,
	DONGIADV INTEGER
);

CREATE TABLE LOAINHANVIEN
(
	MALOAINV INTEGER PRIMARY KEY,
	TENLOAINV TEXT
);


CREATE TABLE NHANVIEN
(
	MANV INTEGER PRIMARY KEY,
	TENNV TEXT,
	CMND TEXT,
	EMAIL TEXT,
	MALOAINV INTEGER,
	
	FOREIGN KEY (MALOAINV) REFERENCES LOAINHANVIEN(MALOAINV) ON DELETE SET NULL
);

CREATE TABLE KHACHHANG
(
	MAKH INTEGER PRIMARY KEY,
	TENKH TEXT,
	DIACHI TEXT,
	SDT TEXT,
	CONGNO INTEGER,
	MAKHUVUC INTEGER,
	EMAIL TEXT,
	
	FOREIGN KEY (MAKHUVUC) REFERENCES KHUVUC(MAKHUVUC) ON DELETE SET NULL
);


CREATE TABLE LOAISANPHAM
(
	MALOAISP INTEGER PRIMARY KEY,
	TENLOAISP TEXT,
	MADVT INTEGER,
	PHANTRAMLOINHUAN INTEGER,
	
	FOREIGN KEY (MADVT) REFERENCES DONVITINH(MADVT) ON DELETE SET NULL
);

CREATE TABLE SANPHAM
(
	MASP INTEGER PRIMARY KEY,
	TENSP TEXT,
	MALOAISP INTEGER,
	DONGIAMUAVAO INTEGER,
	
	FOREIGN KEY (MALOAISP) REFERENCES LOAISANPHAM(MALOAISP) ON DELETE SET NULL
);

CREATE TABLE NHACUNGCAP
(
	MANCC INTEGER PRIMARY KEY,
	DIACHI TEXT,
	DIENTHOAI TEXT,
	MAKHUVUC INTEGER,
	EMAIL TEXT,
	
	FOREIGN KEY (MAKHUVUC) REFERENCES KHUVUC(MAKHUVUC) ON DELETE SET NULL
);

CREATE TABLE PHIEUMUA
(
	MAPHIEU INTEGER PRIMARY KEY,
	SOPHIEU INTEGER,
	NGAYLAP TEXT,
	MANCC INTEGER,
	GHICHU TEXT,
	
	FOREIGN KEY (MANCC) REFERENCES NHACUNGCAP(MANCC) ON DELETE SET NULL
);

CREATE TABLE CHITIETMUA
(
	MAPHIEUMUAHANG INTEGER,
	MASP INTEGER,
	SOLUONG INTEGER,
	DONGIA INTEGER,
	
	PRIMARY KEY (MAPHIEUMUAHANG,MASP),
	
	FOREIGN KEY (MAPHIEUMUAHANG) REFERENCES PHIEUMUA(MAPHIEU) ON DELETE CASCADE,
	FOREIGN KEY (MASP) REFERENCES SANPHAM(MASP) ON DELETE SET NULL
);


CREATE TABLE PHIEUBAN
(
	MAPHIEU INTEGER PRIMARY KEY,
	SOPHIEU INTEGER,
	NGAYLAP TEXT,
	MAKH INTEGER,
	MANV INTEGER,
	CHIETKHAU INTEGER,
	THUE INTEGER,
	THANHTIEN INTEGER,
	GHICHU TEXT,
	
	FOREIGN KEY (MAKH) REFERENCES KHACHHANG(MAKH) ON DELETE SET NULL,
	FOREIGN KEY (MANV) REFERENCES NHANVIEN(MANV) ON DELETE SET NULL
);

CREATE TABLE CHITIETBAN
(
	MAPHIEUMUAHANG INTEGER,
	MASP INTEGER,
	SOLUONG INTEGER,
	THANHTIEN INTEGER,
	DONGIAMUAVAO INTEGER,
	CHIETKHAU INTEGER,
	THUE INTEGER,
	PRIMARY KEY("MAPHIEUMUAHANG","MASP"),
	FOREIGN KEY(MAPHIEUMUAHANG) REFERENCES PHIEUMUA(MAPHIEU) ON DELETE CASCADE,
	FOREIGN KEY(MASP) REFERENCES SANPHAM(MASP) ON DELETE SET NULL
);


CREATE TABLE PHIEUDICHVU
(
	MAPHIEU INTEGER PRIMARY KEY,
	SOPHIEU INTEGER,
	NGAYLAP TEXT,
	MAKH INTEGER,
	TONGTIEN INTEGER,
	TINHTRANG INTEGER,
	TONGTIENTRATRUOC INTEGER,
	MANV INTEGER,
	GHICHU TEXT,
	
	FOREIGN KEY (MAKH) REFERENCES KHACHHANG(MAKH) ON DELETE SET NULL,
	FOREIGN KEY (MANV) REFERENCES NHANVIEN(MANV) ON DELETE SET NULL
);


CREATE TABLE CHITIETDICHVU
(
	MAPHIEU INTEGER,
	MALOAIDV INTEGER,
	MATINHTRANG INTEGER,
	CHIPHIRIENG INTEGER,
	SOLUONG INTEGER,
	THANHTIEN INTEGER,
	TRATRUOC INTEGER,
	NGAYGIAO INTEGER,
	
	PRIMARY KEY(MAPHIEU, MALOAIDV),
	
	FOREIGN KEY(MAPHIEU) REFERENCES PHIEUDICHVU(MAPHIEU) ON DELETE CASCADE,
	FOREIGN KEY(MALOAIDV) REFERENCES LOAIDICHVU(MALOAIDV) ON DELETE SET NULL,
	FOREIGN KEY(MATINHTRANG) REFERENCES TINHTRANG(MATINHTRANG) ON DELETE SET NULL
);


